{% extends 'employee_app/base.html' %}
{% block content %}

<div class="content-area">

    {% if messages %}
    <div style="margin: 20px 0;">
        {% for message in messages %}
        <div style="padding: 15px; margin-bottom: 10px; border-radius: 5px; background: #d4edda; color: #155724;">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Edit User Form Section -->
    <div class="content-card">
        <div class="card-header">
            <h2>Edit User</h2>
            <p class="card-subtitle">Modify details for {{ user.full_name|default:user.email }}</p>
        </div>

        <form class="user-creation-form" method="POST" action="{% url 'employee_app:edit_user' user.id %}">
            {% csrf_token %}

            <!-- Personal Information -->
            <div class="form-section">
                <h3 class="section-title">Personal Information</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label for="userName">Full Name *</label>
                        <input type="text" id="userName" name="full_name"
                               value="{{ user.full_name }}" required>
                    </div>

                    <div class="form-group">
                        <label for="userEmail">Email Address *</label>
                        <input type="email" id="userEmail" name="email"
                               value="{{ user.email }}" readonly>
                        <small>Email cannot be changed</small>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="userPhone">Phone Number</label>
                        <input type="tel" id="userPhone" name="phone"
                               value="{{ user.phone }}">
                    </div>

                    <div class="form-group">
                        <label for="department">Department</label>
                        <select id="department" name="department">
                            <option value="">Select Department</option>
                            <option value="software-dev" {% if user.department == 'software-dev' %}selected{% endif %}>Software Development</option>
                            <option value="hr" {% if user.department == 'hr' %}selected{% endif %}>HR</option>
                            <option value="finance" {% if user.department == 'finance' %}selected{% endif %}>Finance</option>
                            <option value="operations" {% if user.department == 'operations' %}selected{% endif %}>Operations</option>
                            <option value="training" {% if user.department == 'training' %}selected{% endif %}>Training & Development</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Account Information -->
            <div class="form-section">
                <h3 class="section-title">Account Information</h3>

                <div class="form-row">
                    <div class="form-group">
                        <label for="userRole">User Role *</label>
                        <select id="userRole" name="role" required>
                            <option value="">Select Role</option>
                            <option value="super_admin" {% if user.role == 'super_admin' %}selected{% endif %}>Super Admin</option>
                            <option value="admin" {% if user.role == 'admin' %}selected{% endif %}>Admin</option>
                            <option value="scrum_master" {% if user.role == 'scrum_master' %}selected{% endif %}>Scrum Master</option>
                            <option value="trainer" {% if user.role == 'trainer' %}selected{% endif %}>Trainer</option>
                            <option value="employee" {% if user.role == 'employee' %}selected{% endif %}>Employee</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="status">Status *</label>
                        <select id="status" name="status" required>
                            <option value="active" {% if user.status == 'active' %}selected{% endif %}>Active</option>
                            <option value="inactive" {% if user.status == 'inactive' %}selected{% endif %}>Inactive</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Update User</button>
                <a href="{% url 'employee_app:users_manager' %}" class="btn btn-secondary">Cancel</a>
            </div>
        </form>
    </div>
</div>

{% endblock %}
