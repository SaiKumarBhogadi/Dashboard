{% extends 'employee_app/base.html' %}

{% block page_title %}Edit Session: {{ session.title }}{% endblock %}

{% block content %}
<div class="content-area">
  <div class="content-card" style="max-width: 1100px; margin: 0 auto;">

    <!-- Header -->
    <div class="card-header">
      <h2>Edit Session: {{ session.title }}</h2>
      <p class="card-subtitle">
        Batch: {{ session.batch.name }} • 
        Status: <span class="status-badge {{ session.status }}">{{ session.get_status_display }}</span>
      </p>
    </div>

    <form method="post" class="p-4">
      {% csrf_token %}

      <!-- Session Information -->
      <div class="form-section">
        <h3 class="section-title">Session Information</h3>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label required">Session Title</label>
            {{ form.title }}
            {% if form.title.errors %}<small class="text-danger">{{ form.title.errors|join:" • " }}</small>{% endif %}
          </div>

          <!-- Batch is read-only in edit -->
          <div class="form-group">
            <label class="form-label">Batch</label>
            <input type="text" class="form-control" value="{{ session.batch.name }}" readonly>
            <small class="help-text text-muted">Batch cannot be changed after creation</small>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label required">Date & Time</label>
            {{ form.date_time }}
            {% if form.date_time.errors %}<small class="text-danger">{{ form.date_time.errors|join:" • " }}</small>{% endif %}
          </div>

          <div class="form-group">
            <label class="form-label">Duration (hours)</label>
            {{ form.duration_hours }}
            {% if form.duration_hours.errors %}<small class="text-danger">{{ form.duration_hours.errors|join:" • " }}</small>{% endif %}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label class="form-label">Agenda / Topics Covered</label>
            {{ form.agenda }}
            {% if form.agenda.errors %}<small class="text-danger">{{ form.agenda.errors|join:" • " }}</small>{% endif %}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label class="form-label">Meeting Link</label>
            {{ form.meeting_link }}
            {% if form.meeting_link.errors %}<small class="text-danger">{{ form.meeting_link.errors|join:" • " }}</small>{% endif %}
          </div>

          <div class="form-group">
            <label class="form-label">Status</label>
            {{ form.status }}
            {% if form.status.errors %}<small class="text-danger">{{ form.status.errors|join:" • " }}</small>{% endif %}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group full-width">
            <label class="form-label">Additional Notes</label>
            {{ form.notes }}
            {% if form.notes.errors %}<small class="text-danger">{{ form.notes.errors|join:" • " }}</small>{% endif %}
          </div>
        </div>
      </div>

      <!-- Lead Trainer -->
      <div class="form-section">
        <h3 class="section-title">Lead Trainer</h3>
        <div class="form-group full-width">
          <label class="form-label">Select Trainer</label>
          {{ form.trainer }}
          {% if form.trainer.errors %}<small class="text-danger">{{ form.trainer.errors|join:" • " }}</small>{% endif %}
          <small class="help-text">Only trainers assigned to this batch are allowed</small>
        </div>
      </div>

      <!-- Actions -->
      <div class="form-actions text-center mt-5">
        <button type="submit" class="btn btn-primary btn-lg px-5 py-3">
          <i class="fas fa-save me-2"></i> Update Session
        </button>
        <a href="{% url 'employee_app:session_detail' session.pk %}" class="btn btn-outline-secondary btn-lg px-5 py-3 ms-3">
          Cancel
        </a>
      </div>
    </form>
  </div>
</div>
{% endblock %}