{% extends 'employee_app/base.html' %}

{% block page_title %}Edit User - {{ user.full_name|default:user.email }}{% endblock %}

{% block content %}
<div class="content-area">
  <div class="content-card">
    <div class="card-header">
      <h2>Edit User</h2>
      <p class="card-subtitle">Modify details for {{ user.full_name|default:user.email }}</p>
    </div>

    {% if messages %}
      <div style="margin: 20px 0;">
        {% for message in messages %}
          <div style="padding: 15px; margin-bottom: 10px; border-radius: 5px; background: #d4edda; color: #155724;">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form class="user-creation-form" method="POST" action="{% url 'employee_app:edit_user' user.id %}">
      {% csrf_token %}

      <!-- Personal Information -->
      <div class="form-section">
        <h3 class="section-title">Personal Information</h3>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.full_name.id_for_label }}">Full Name *</label>
            {{ form.full_name }}
            {{ form.full_name.errors }}
          </div>

          <div class="form-group">
            <label for="{{ form.email.id_for_label }}">Email Address *</label>
            {{ form.email }}
            {{ form.email.errors }}
            <small>Email cannot be changed</small>
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.phone.id_for_label }}">Phone Number</label>
            {{ form.phone }}
            {{ form.phone.errors }}
          </div>

          <div class="form-group">
            <label for="{{ form.department.id_for_label }}">Department</label>
            {{ form.department }}
            {{ form.department.errors }}
          </div>
        </div>
      </div>

      <!-- Account Information -->
      <div class="form-section">
        <h3 class="section-title">Account Information</h3>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.role.id_for_label }}">User Role *</label>
            {{ form.role }}
            {{ form.role.errors }}
          </div>

          <div class="form-group">
            <label for="{{ form.status.id_for_label }}">Status *</label>
            {{ form.status }}
            {{ form.status.errors }}
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="form-actions" style="margin-top: 40px; text-align: center;">
        <button type="submit" class="btn btn-primary" style="padding: 16px 60px; font-size: 17px;">Update User</button>
        <a href="{% url 'employee_app:users_manager' %}" class="btn btn-secondary" style="padding: 16px 40px; margin-left: 20px;">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}