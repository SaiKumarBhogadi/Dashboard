{% extends 'employee_app/base.html' %}

{% block page_title %}Edit Employee Bio Data - {{ bio.first_name }} {{ bio.last_name }}{% endblock %}

{% block content %}
<div class="content-area">
  <div class="content-card" style="max-width: 1100px;">
    <div class="card-header">
      <h2>Edit: {{ bio.first_name }} {{ bio.middle_name|default:'' }} {{ bio.last_name }}</h2>
      <p class="card-subtitle">Employee ID: {{ bio.employee_id|default:"Not assigned" }} â€¢ Status: Approved</p>
    </div>

    {% if messages %}
      <div style="margin: 20px 0;">
        {% for message in messages %}
          <div style="padding: 15px; margin-bottom: 10px; border-radius: 5px; background: #d4edda; color: #155724;">
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}

    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <!-- Personal Details -->
      <div class="form-section">
        <h3 class="section-title">Personal Details</h3>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.first_name.id_for_label }}">First Name *</label>
            {{ form.first_name }}
            {{ form.first_name.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.middle_name.id_for_label }}">Middle Name</label>
            {{ form.middle_name }}
            {{ form.middle_name.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.last_name.id_for_label }}">Last Name *</label>
            {{ form.last_name }}
            {{ form.last_name.errors }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.dob.id_for_label }}">Date of Birth</label>
            {{ form.dob }}
            {{ form.dob.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.gender.id_for_label }}">Gender</label>
            {{ form.gender }}
            {{ form.gender.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.marital_status.id_for_label }}">Marital Status</label>
            {{ form.marital_status }}
            {{ form.marital_status.errors }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.contact_number.id_for_label }}">Contact Number *</label>
            {{ form.contact_number }}
            {{ form.contact_number.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.emergency_contact.id_for_label }}">Emergency Contact</label>
            {{ form.emergency_contact }}
            {{ form.emergency_contact.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.blood_group.id_for_label }}">Blood Group</label>
            {{ form.blood_group }}
            {{ form.blood_group.errors }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.personal_email.id_for_label }}">Personal Email *</label>
            {{ form.personal_email }}
            {{ form.personal_email.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.post_applied_for.id_for_label }}">Post Applied For</label>
            {{ form.post_applied_for }}
            {{ form.post_applied_for.errors }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.experience_type.id_for_label }}">Experience Type *</label>
            {{ form.experience_type }}
            {{ form.experience_type.errors }}
          </div>
        </div>
      </div>

      <!-- Address -->
      <div class="form-section">
        <h3 class="section-title">Address</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.address_line1.id_for_label }}">Address Line 1</label>
            {{ form.address_line1 }}
            {{ form.address_line1.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.address_line2.id_for_label }}">Address Line 2</label>
            {{ form.address_line2 }}
            {{ form.address_line2.errors }}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.city.id_for_label }}">City</label>
            {{ form.city }}
            {{ form.city.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.state.id_for_label }}">State / Province</label>
            {{ form.state }}
            {{ form.state.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.postal_code.id_for_label }}">Postal Code</label>
            {{ form.postal_code }}
            {{ form.postal_code.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.country.id_for_label }}">Country</label>
            {{ form.country }}
            {{ form.country.errors }}
          </div>
        </div>
      </div>

      <!-- Aadhar & PAN -->
      <div class="form-section">
        <h3 class="section-title">Aadhar & PAN</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.aadhar_no.id_for_label }}">Aadhar Card No</label>
            {{ form.aadhar_no }}
            {{ form.aadhar_no.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.pan_no.id_for_label }}">PAN Card No</label>
            {{ form.pan_no }}
            {{ form.pan_no.errors }}
          </div>
        </div>
      </div>

      <!-- Bank Details -->
      <div class="form-section">
        <h3 class="section-title">Bank Details</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.bank_name.id_for_label }}">Bank Name</label>
            {{ form.bank_name }}
            {{ form.bank_name.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.bank_branch.id_for_label }}">Bank Branch Name</label>
            {{ form.bank_branch }}
            {{ form.bank_branch.errors }}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.account_number.id_for_label }}">Account Number</label>
            {{ form.account_number }}
            {{ form.account_number.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.account_name.id_for_label }}">Account Name</label>
            {{ form.account_name }}
            {{ form.account_name.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.ifsc_code.id_for_label }}">IFSC Code</label>
            {{ form.ifsc_code }}
            {{ form.ifsc_code.errors }}
          </div>
        </div>
      </div>

      <!-- Professional Details -->
      <div class="form-section">
        <h3 class="section-title">Professional Details</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.employee_id.id_for_label }}">Employee ID *</label>
            {{ form.employee_id }}
            {{ form.employee_id.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.official_email.id_for_label }}">Official Email *</label>
            {{ form.official_email }}
            {{ form.official_email.errors }}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.designation.id_for_label }}">Designation *</label>
            {{ form.designation }}
            {{ form.designation.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.department.id_for_label }}">Department *</label>
            {{ form.department }}
            {{ form.department.errors }}
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.doj.id_for_label }}">Date of Joining *</label>
            {{ form.doj }}
            {{ form.doj.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.work_mode.id_for_label }}">Work Mode</label>
            {{ form.work_mode }}
            {{ form.work_mode.errors }}
          </div>
        </div>
      </div>

      <!-- Skills -->
      <div class="form-section">
        <h3 class="section-title">Skills</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.technical_skills.id_for_label }}">Technical Skills *</label>
            {{ form.technical_skills }}
            {{ form.technical_skills.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.soft_skills.id_for_label }}">Soft Skills</label>
            {{ form.soft_skills }}
            {{ form.soft_skills.errors }}
          </div>
        </div>
      </div>

      <!-- References -->
      <div class="form-section">
        <h3 class="section-title">References</h3>
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.reference_name.id_for_label }}">Reference Name</label>
            {{ form.reference_name }}
            {{ form.reference_name.errors }}
          </div>
          <div class="form-group">
            <label for="{{ form.reference_contact.id_for_label }}">Reference Contact</label>
            {{ form.reference_contact }}
            {{ form.reference_contact.errors }}
          </div>
        </div>
      </div>

      <!-- Education (Basic fields - add more if needed) -->
    <!-- Education -->
<div class="form-section">
  <h3 class="section-title">Education</h3>

  <!-- SSC -->
  <div class="form-row">
    <div class="form-group">
      <label for="{{ form.ssc_school.id_for_label }}">SSC School</label>
      {{ form.ssc_school }}
      {{ form.ssc_school.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.ssc_year.id_for_label }}">SSC Year</label>
      {{ form.ssc_year }}
      {{ form.ssc_year.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.ssc_grade.id_for_label }}">SSC Grade</label>
      {{ form.ssc_grade }}
      {{ form.ssc_grade.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.ssc_marksheet.id_for_label }}">SSC Marksheet</label>
      {% if bio.ssc_marksheet %}
        <p>Current: <a href="{{ bio.ssc_marksheet.url }}" target="_blank">View Current SSC Marksheet</a></p>
      {% endif %}
      {{ form.ssc_marksheet }}
      {{ form.ssc_marksheet.errors }}
    </div>
  </div>

  <!-- SSLC -->
  <div class="form-row">
    <div class="form-group">
      <label for="{{ form.sslc_school.id_for_label }}">SSLC School</label>
      {{ form.sslc_school }}
      {{ form.sslc_school.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.sslc_year.id_for_label }}">SSLC Year</label>
      {{ form.sslc_year }}
      {{ form.sslc_year.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.sslc_grade.id_for_label }}">SSLC Grade</label>
      {{ form.sslc_grade }}
      {{ form.sslc_grade.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.sslc_marksheet.id_for_label }}">SSLC Marksheet</label>
      {% if bio.sslc_marksheet %}
        <p>Current: <a href="{{ bio.sslc_marksheet.url }}" target="_blank">View Current SSLC Marksheet</a></p>
      {% endif %}
      {{ form.sslc_marksheet }}
      {{ form.sslc_marksheet.errors }}
    </div>
  </div>

  <!-- UG -->
  <div class="form-row">
    <div class="form-group">
      <label for="{{ form.ug_degree.id_for_label }}">UG Degree</label>
      {{ form.ug_degree }}
      {{ form.ug_degree.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.ug_institution.id_for_label }}">UG Institution</label>
      {{ form.ug_institution }}
      {{ form.ug_institution.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.ug_year.id_for_label }}">UG Year</label>
      {{ form.ug_year }}
      {{ form.ug_year.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.ug_documents.id_for_label }}">UG Documents</label>
      {% if bio.ug_documents %}
        <p>Current: <a href="{{ bio.ug_documents.url }}" target="_blank">View Current UG Documents</a></p>
      {% endif %}
      {{ form.ug_documents }}
      {{ form.ug_documents.errors }}
    </div>
  </div>

  <!-- PG -->
  <div class="form-row">
    <div class="form-group">
      <label for="{{ form.pg_degree.id_for_label }}">PG Degree</label>
      {{ form.pg_degree }}
      {{ form.pg_degree.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.pg_institution.id_for_label }}">PG Institution</label>
      {{ form.pg_institution }}
      {{ form.pg_institution.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.pg_year.id_for_label }}">PG Year</label>
      {{ form.pg_year }}
      {{ form.pg_year.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.pg_documents.id_for_label }}">PG Documents</label>
      {% if bio.pg_documents %}
        <p>Current: <a href="{{ bio.pg_documents.url }}" target="_blank">View Current PG Documents</a></p>
      {% endif %}
      {{ form.pg_documents }}
      {{ form.pg_documents.errors }}
    </div>
  </div>

  <!-- Certification -->
  <div class="form-row">
    <div class="form-group">
      <label for="{{ form.cert_course.id_for_label }}">Certification Course</label>
      {{ form.cert_course }}
      {{ form.cert_course.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.cert_institution.id_for_label }}">Certification Institution</label>
      {{ form.cert_institution }}
      {{ form.cert_institution.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.cert_year.id_for_label }}">Certification Year</label>
      {{ form.cert_year }}
      {{ form.cert_year.errors }}
    </div>
    <div class="form-group">
      <label for="{{ form.cert_document.id_for_label }}">Certification Document</label>
      {% if bio.cert_document %}
        <p>Current: <a href="{{ bio.cert_document.url }}" target="_blank">View Current Certification</a></p>
      {% endif %}
      {{ form.cert_document }}
      {{ form.cert_document.errors }}
    </div>
  </div>
</div>

      <!-- Documents (Optional Re-upload) -->
      <div class="form-section">
        <h3 class="section-title">Documents (Leave blank to keep current)</h3>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.photo.id_for_label }}">Photo</label>
            {% if bio.photo %}
              <p>Current: <a href="{{ bio.photo.url }}" target="_blank">View Current Photo</a></p>
            {% endif %}
            {{ form.photo }}
            {{ form.photo.errors }}
          </div>

          <div class="form-group">
            <label for="{{ form.resume.id_for_label }}">Resume</label>
            {% if bio.resume %}
              <p>Current: <a href="{{ bio.resume.url }}" target="_blank">View Current Resume</a></p>
            {% endif %}
            {{ form.resume }}
            {{ form.resume.errors }}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.aadhar_card.id_for_label }}">Aadhar Card</label>
            {% if bio.aadhar_card %}
              <p>Current: <a href="{{ bio.aadhar_card.url }}" target="_blank">View Current Aadhar</a></p>
            {% endif %}
            {{ form.aadhar_card }}
            {{ form.aadhar_card.errors }}
          </div>

          <div class="form-group">
            <label for="{{ form.pan_card.id_for_label }}">PAN Card</label>
            {% if bio.pan_card %}
              <p>Current: <a href="{{ bio.pan_card.url }}" target="_blank">View Current PAN</a></p>
            {% endif %}
            {{ form.pan_card }}
            {{ form.pan_card.errors }}
          </div>
        </div>

       
      </div>

      <!-- Form Actions -->
      <div class="form-actions" style="margin: 60px 0; text-align: center;">
        <button type="submit" class="btn btn-primary" style="padding: 16px 60px; font-size: 17px;">Save Changes</button>
        <a href="{% url 'employee_app:view_biodata' bio.pk %}" class="btn btn-secondary" style="padding: 16px 40px; margin-left: 20px;">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}